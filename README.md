# 🧩 Pokémon Server Project (진행중)

이 프로젝트는 **PokéAPI 데이터를 기반으로 한 Pokémon 백엔드 서버**이며,  
단순한 데이터 수집이나 CRUD 구현이 아니라 **비동기 처리, 배치 처리, 모듈 분리, 인프라 추상화**를 중심으로 설계되었습니다.

> ❗ 목적은 “포켓몬 서비스 구현” 그 자체가 아니라  
> **실무에서 요구되는 서버 구조 설계와 의사결정 과정을 코드로 보여주는 것**입니다.

---

## 🎯 프로젝트 목표

### 1. 대량 외부 API 데이터를 안정적으로 수집
- PokéAPI는
    - 데이터 수가 많고 (수백 ~ 천 단위)
    - 일부 예외/실패 데이터가 섞여 있으며
    - 요청 시간이 길어질 수 있음
- 이를 **재시도 가능한 비동기 배치 처리 구조**로 안정화

### 2. JPA 환경에서도 비동기·장시간 작업 처리
- JPA는 기본적으로 **동기 + 트랜잭션 기반**
- 하지만 서비스 요구사항은
    - 요청 즉시 응답
    - 백그라운드에서 장시간 작업 수행
- → **Coroutine + SupervisorJob 기반 AppScope** 도입
- 원래는 R2DBC로 진행하려했지만, JPA를 다뤄보고자 두가지 버전 모두 개발 예정

### 3. 실패를 장애가 아닌 상태로 관리
- 실패 데이터를 로그로만 남기지 않음
- DB에 저장하여
    - 재시도 가능
    - 부분 성공/실패 분리 처리
- **멱등성을 지킨 배치 구조** 설계

### 4. 모듈 단위 책임 분리
- 실행기 / 공통 인프라 / 도메인 로직 분리
- 모듈은 단일 책임을 지키고, 의존성을 통해서 서로의 기능을 사용
- 애그리게이트와 애그리게이트 루트를 모듈 의존성으로 표현

---

## 🏗️ 전체 모듈 구조

```text
poke/
├── core        # (향후 확장) 범용 유틸 / 추상화 레이어
├── common      # 공통 인프라, 배치, 코루틴, WebClient, 실패 관리
├── serverApp   # Spring Boot 실행기 (main)
└── serverXXX   # 도메인 모듈 (type, move, pokemon 등)
```
